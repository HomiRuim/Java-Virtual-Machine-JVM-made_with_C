<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ultimate JVM: include/jvm.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Ultimate JVM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">jvm.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="jvm_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifndef JVM_H</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#define JVM_H</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160; </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="classfile_8h.html">classfile.h</a>&quot;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="io_8h.html">io.h</a>&quot;</span> <span class="comment">// Para u1, u2, u4</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160; </div>
<div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="jvm_8h.html#a86d327ec8a0687565c3bfae1d0407b97">   16</a></span>&#160;<span class="keyword">typedef</span> <a class="code" href="base_8h.html#ae5be1f726785414dd1b77d60df074c9d">u4</a> <a class="code" href="jvm_8h.html#a86d327ec8a0687565c3bfae1d0407b97">Slot</a>;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="structframe.html">   33</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structframe.html">frame</a> {</div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="structframe.html#ab23911a759a756c26a68abe18048efc0">   34</a></span>&#160;    <a class="code" href="structclass__file.html">ClassFile</a> *<a class="code" href="structframe.html#ab23911a759a756c26a68abe18048efc0">class_file</a>;      <span class="comment">// Ponteiro para a estrutura ClassFile</span></div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="structframe.html#a51727b37d36bcc4fc24c3aef38f50c59">   35</a></span>&#160;    <a class="code" href="structs__method__info.html">MethodInfo</a> *<a class="code" href="structframe.html#a51727b37d36bcc4fc24c3aef38f50c59">method_info</a>;    <span class="comment">// Ponteiro para a estrutura MethodInfo</span></div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="structframe.html#a08aa1a35c8668ad339341462eb9e9823">   36</a></span>&#160;    <a class="code" href="base_8h.html#ad9f4cdb6757615aae2fad89dab3c5470">u1</a> *<a class="code" href="structframe.html#a08aa1a35c8668ad339341462eb9e9823">pc</a>;                     <span class="comment">// Program Counter: ponteiro para o próximo bytecode a ser executado</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="structframe.html#a79a89a7668658b2721992d50f52245f0">   38</a></span>&#160;    <a class="code" href="jvm_8h.html#a86d327ec8a0687565c3bfae1d0407b97">Slot</a> *<a class="code" href="structframe.html#a79a89a7668658b2721992d50f52245f0">local_vars</a>;           <span class="comment">// Ponteiro para o início do vetor de Variáveis Locais</span></div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="structframe.html#af825f0d839114d155f372f225a229484">   39</a></span>&#160;    <a class="code" href="jvm_8h.html#a86d327ec8a0687565c3bfae1d0407b97">Slot</a> *<a class="code" href="structframe.html#af825f0d839114d155f372f225a229484">operand_stack</a>;        <span class="comment">// Ponteiro para o início do vetor da Pilha de Operandos</span></div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="structframe.html#a8bb4cd7fd3d53c0c86496303c07e2066">   40</a></span>&#160;    <a class="code" href="jvm_8h.html#a86d327ec8a0687565c3bfae1d0407b97">Slot</a> *<a class="code" href="structframe.html#a8bb4cd7fd3d53c0c86496303c07e2066">stack_top</a>;            <span class="comment">// Ponteiro para o topo da Pilha de Operandos (próximo slot livre)</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="structframe.html#a23c908c0892e1329c82f3673e1d659eb">   42</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structframe.html">frame</a> *<a class="code" href="structframe.html#a23c908c0892e1329c82f3673e1d659eb">next</a>;         <span class="comment">// Ponteiro para o próximo Frame na pilha (Call Stack)</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="comment">// O vetor de Slots que armazena Local Vars e Operand Stack.</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="comment">// O tamanho total é determinado pela soma de max_locals e max_stack do Code Attribute.</span></div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="structframe.html#aa7df7a41d2e2eb9db604cba143476a90">   46</a></span>&#160;    <a class="code" href="jvm_8h.html#a86d327ec8a0687565c3bfae1d0407b97">Slot</a> <a class="code" href="structframe.html#aa7df7a41d2e2eb9db604cba143476a90">slots_data</a>[];</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="jvm_8h.html#a21bb256e580b3d3c1d8ad8456756edd3">   47</a></span>&#160;} <a class="code" href="jvm_8h.html#a21bb256e580b3d3c1d8ad8456756edd3">Frame</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="structjvm__state.html">   55</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structjvm__state.html">jvm_state</a> {</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="structjvm__state.html#a273598c91eeaca9062a558052e54a819">   56</a></span>&#160;    <a class="code" href="structframe.html">Frame</a> *<a class="code" href="structjvm__state.html#a273598c91eeaca9062a558052e54a819">call_stack</a>;          <span class="comment">// Ponteiro para o Frame atual (topo da pilha)</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="comment">// TODO: Adicionar a área de classes carregadas (mapa de ClassFile*)</span></div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="jvm_8h.html#a664bfa73f47a40dcfb86469acc644cb4">   58</a></span>&#160;} <a class="code" href="jvm_8h.html#a664bfa73f47a40dcfb86469acc644cb4">JVMState</a>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<a class="code" href="structframe.html">Frame</a> *<a class="code" href="jvm_8h.html#a0713b69eb415e22f4417919bac572a5e">frame_new</a>(<a class="code" href="structclass__file.html">ClassFile</a> *<a class="code" href="structclass__file.html">class_file</a>, <a class="code" href="structs__method__info.html">MethodInfo</a> *method_info, <a class="code" href="base_8h.html#a732cde1300aafb73b0ea6c2558a7a54f">u2</a> max_locals, <a class="code" href="base_8h.html#a732cde1300aafb73b0ea6c2558a7a54f">u2</a> max_stack);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="keywordtype">void</span> <a class="code" href="jvm_8h.html#a5d9a6d3a4bc3ef219e60d74a75196885">frame_free</a>(<a class="code" href="structframe.html">Frame</a> *<a class="code" href="structframe.html">frame</a>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<a class="code" href="structjvm__state.html">JVMState</a> *<a class="code" href="jvm_8h.html#a5834bf31a9e5f0dab45edd6f95b56fc6">jvm_new</a>();</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="keywordtype">void</span> <a class="code" href="jvm_8h.html#a9a088efc4b2a4b70e9e6997459abfd7c">jvm_free</a>(<a class="code" href="structjvm__state.html">JVMState</a> *jvm);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// JVM_H</span></div>
<div class="ttc" id="abase_8h_html_a732cde1300aafb73b0ea6c2558a7a54f"><div class="ttname"><a href="base_8h.html#a732cde1300aafb73b0ea6c2558a7a54f">u2</a></div><div class="ttdeci">uint16_t u2</div><div class="ttdef"><b>Definition:</b> base.h:7</div></div>
<div class="ttc" id="abase_8h_html_ad9f4cdb6757615aae2fad89dab3c5470"><div class="ttname"><a href="base_8h.html#ad9f4cdb6757615aae2fad89dab3c5470">u1</a></div><div class="ttdeci">uint8_t u1</div><div class="ttdef"><b>Definition:</b> base.h:6</div></div>
<div class="ttc" id="abase_8h_html_ae5be1f726785414dd1b77d60df074c9d"><div class="ttname"><a href="base_8h.html#ae5be1f726785414dd1b77d60df074c9d">u4</a></div><div class="ttdeci">uint32_t u4</div><div class="ttdef"><b>Definition:</b> base.h:8</div></div>
<div class="ttc" id="aclassfile_8h_html"><div class="ttname"><a href="classfile_8h.html">classfile.h</a></div></div>
<div class="ttc" id="aio_8h_html"><div class="ttname"><a href="io_8h.html">io.h</a></div></div>
<div class="ttc" id="ajvm_8h_html_a0713b69eb415e22f4417919bac572a5e"><div class="ttname"><a href="jvm_8h.html#a0713b69eb415e22f4417919bac572a5e">frame_new</a></div><div class="ttdeci">Frame * frame_new(ClassFile *class_file, MethodInfo *method_info, u2 max_locals, u2 max_stack)</div><div class="ttdoc">Inicializa um novo Frame de Execução.</div><div class="ttdef"><b>Definition:</b> jvm.c:9</div></div>
<div class="ttc" id="ajvm_8h_html_a21bb256e580b3d3c1d8ad8456756edd3"><div class="ttname"><a href="jvm_8h.html#a21bb256e580b3d3c1d8ad8456756edd3">Frame</a></div><div class="ttdeci">struct frame Frame</div><div class="ttdoc">Estrutura que representa um Frame de Execução.</div></div>
<div class="ttc" id="ajvm_8h_html_a5834bf31a9e5f0dab45edd6f95b56fc6"><div class="ttname"><a href="jvm_8h.html#a5834bf31a9e5f0dab45edd6f95b56fc6">jvm_new</a></div><div class="ttdeci">JVMState * jvm_new()</div><div class="ttdoc">Inicializa o estado da JVM.</div><div class="ttdef"><b>Definition:</b> jvm.c:54</div></div>
<div class="ttc" id="ajvm_8h_html_a5d9a6d3a4bc3ef219e60d74a75196885"><div class="ttname"><a href="jvm_8h.html#a5d9a6d3a4bc3ef219e60d74a75196885">frame_free</a></div><div class="ttdeci">void frame_free(Frame *frame)</div><div class="ttdoc">Libera a memória de um Frame.</div><div class="ttdef"><b>Definition:</b> jvm.c:43</div></div>
<div class="ttc" id="ajvm_8h_html_a664bfa73f47a40dcfb86469acc644cb4"><div class="ttname"><a href="jvm_8h.html#a664bfa73f47a40dcfb86469acc644cb4">JVMState</a></div><div class="ttdeci">struct jvm_state JVMState</div><div class="ttdoc">Estrutura que representa o estado da JVM (máquina virtual).</div></div>
<div class="ttc" id="ajvm_8h_html_a86d327ec8a0687565c3bfae1d0407b97"><div class="ttname"><a href="jvm_8h.html#a86d327ec8a0687565c3bfae1d0407b97">Slot</a></div><div class="ttdeci">u4 Slot</div><div class="ttdoc">Tipo genérico para representar um valor na Pilha de Operandos ou Variáveis Locais.</div><div class="ttdef"><b>Definition:</b> jvm.h:16</div></div>
<div class="ttc" id="ajvm_8h_html_a9a088efc4b2a4b70e9e6997459abfd7c"><div class="ttname"><a href="jvm_8h.html#a9a088efc4b2a4b70e9e6997459abfd7c">jvm_free</a></div><div class="ttdeci">void jvm_free(JVMState *jvm)</div><div class="ttdoc">Libera a memória do estado da JVM.</div><div class="ttdef"><b>Definition:</b> jvm.c:67</div></div>
<div class="ttc" id="astructclass__file_html"><div class="ttname"><a href="structclass__file.html">class_file</a></div><div class="ttdef"><b>Definition:</b> classfile.h:75</div></div>
<div class="ttc" id="astructframe_html"><div class="ttname"><a href="structframe.html">frame</a></div><div class="ttdoc">Estrutura que representa um Frame de Execução.</div><div class="ttdef"><b>Definition:</b> jvm.h:33</div></div>
<div class="ttc" id="astructframe_html_a08aa1a35c8668ad339341462eb9e9823"><div class="ttname"><a href="structframe.html#a08aa1a35c8668ad339341462eb9e9823">frame::pc</a></div><div class="ttdeci">u1 * pc</div><div class="ttdef"><b>Definition:</b> jvm.h:36</div></div>
<div class="ttc" id="astructframe_html_a23c908c0892e1329c82f3673e1d659eb"><div class="ttname"><a href="structframe.html#a23c908c0892e1329c82f3673e1d659eb">frame::next</a></div><div class="ttdeci">struct frame * next</div><div class="ttdef"><b>Definition:</b> jvm.h:42</div></div>
<div class="ttc" id="astructframe_html_a51727b37d36bcc4fc24c3aef38f50c59"><div class="ttname"><a href="structframe.html#a51727b37d36bcc4fc24c3aef38f50c59">frame::method_info</a></div><div class="ttdeci">MethodInfo * method_info</div><div class="ttdef"><b>Definition:</b> jvm.h:35</div></div>
<div class="ttc" id="astructframe_html_a79a89a7668658b2721992d50f52245f0"><div class="ttname"><a href="structframe.html#a79a89a7668658b2721992d50f52245f0">frame::local_vars</a></div><div class="ttdeci">Slot * local_vars</div><div class="ttdef"><b>Definition:</b> jvm.h:38</div></div>
<div class="ttc" id="astructframe_html_a8bb4cd7fd3d53c0c86496303c07e2066"><div class="ttname"><a href="structframe.html#a8bb4cd7fd3d53c0c86496303c07e2066">frame::stack_top</a></div><div class="ttdeci">Slot * stack_top</div><div class="ttdef"><b>Definition:</b> jvm.h:40</div></div>
<div class="ttc" id="astructframe_html_aa7df7a41d2e2eb9db604cba143476a90"><div class="ttname"><a href="structframe.html#aa7df7a41d2e2eb9db604cba143476a90">frame::slots_data</a></div><div class="ttdeci">Slot slots_data[]</div><div class="ttdef"><b>Definition:</b> jvm.h:46</div></div>
<div class="ttc" id="astructframe_html_ab23911a759a756c26a68abe18048efc0"><div class="ttname"><a href="structframe.html#ab23911a759a756c26a68abe18048efc0">frame::class_file</a></div><div class="ttdeci">ClassFile * class_file</div><div class="ttdef"><b>Definition:</b> jvm.h:34</div></div>
<div class="ttc" id="astructframe_html_af825f0d839114d155f372f225a229484"><div class="ttname"><a href="structframe.html#af825f0d839114d155f372f225a229484">frame::operand_stack</a></div><div class="ttdeci">Slot * operand_stack</div><div class="ttdef"><b>Definition:</b> jvm.h:39</div></div>
<div class="ttc" id="astructjvm__state_html"><div class="ttname"><a href="structjvm__state.html">jvm_state</a></div><div class="ttdoc">Estrutura que representa o estado da JVM (máquina virtual).</div><div class="ttdef"><b>Definition:</b> jvm.h:55</div></div>
<div class="ttc" id="astructjvm__state_html_a273598c91eeaca9062a558052e54a819"><div class="ttname"><a href="structjvm__state.html#a273598c91eeaca9062a558052e54a819">jvm_state::call_stack</a></div><div class="ttdeci">Frame * call_stack</div><div class="ttdef"><b>Definition:</b> jvm.h:56</div></div>
<div class="ttc" id="astructs__method__info_html"><div class="ttname"><a href="structs__method__info.html">s_method_info</a></div><div class="ttdef"><b>Definition:</b> class_manager.h:22</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
